---
# Generated by Geminock v1.7 . cache_key='4dad3ca9941a91c01b8f0aaf37214cfaa1e22b53c47d93a9f1bec2a1e20dfd89-fr.yaml'
geminock_ver: '1.7'

# Note this is SUPER weird, I try to make this work for ALL my thingies so there might be some behavioural clatches in the
# initial HEADER :) Lets try to keep it small :)
title: "üá´üá∑ ‚ôä [Geminocks] Configuration d'un d√©clencheur ‚¨£ Cloud Build avec üßπPulumi en üêç Python"
date: 2022-09-22T21:17:43+01:00
draft: false
tags: [symlink, GCP, pulumi, CloudBuild, Medium, geminocks, French]
# paperMod
canonicalURL: https://medium.com/google-cloud/setting-cloudbuild-with-pulumi-in-python-330e8b54b2cf
# ANANKE :)
featured_image: /images/gohugo-default-sample-hero-image.jpg
image: /images/mtg-clone.jpg
---

L'article original ici :  https://medium.com/google-cloud/setting-cloudbuild-with-pulumi-in-python-330e8b54b2cf

TODO(7feb23): ajouter cette vid√©o en tant que vid√©o int√©gr√©e : https://www.youtube.com/watch?v=5jhWVNN8P_M (cr√©√©e le 6feb23)

Il y a quelques semaines, je suis tomb√© amoureux de **Pulumi**. Il a tout ce que j'attendais de Terraform : facile √† configurer, gestion de configuration facile, une interface utilisateur agr√©able et gratuite, et surtout... la prise en charge de plusieurs langages ! Pulumi est la meilleure invention apr√®s la pizza Buffalo et n'a qu'un seul probl√®me... [pas de prise en charge de Ruby](https://github.com/pulumi/pulumi/issues/132) :/

Quoi qu'il en soit, je suis tellement amoureux de ‚¨£ GCP (qui se trouve √† payer mon salaire, je dois l'admettre), Cloud Build, Cloud Deploy, et en g√©n√©ral des pipelines CI/CD sur Google Cloud que je voulais l'essayer. En cherchant sur Google "Cloud Build Pulumi", je suis tomb√© sur ce bel article pour JavaScript, qui n'est pas dans mes cordes.

## Le code

Mon code est ici : https://github.com/palladius/pulumi/tree/main/examples/python-gcp-cloudbuild-auto-trigger

Remarque : üëç Le code est enfin compil√© correctement. Youpi !

![cb-trigger-list](01-cb-trigger-list.webp)


## Qu'est-ce que ce code a de si sp√©cial ?

Le code permet √† tout projet Pulumi que vous pourriez avoir sur GCP (en Python üêç) de configurer un d√©clencheur pour se mettre √† jour automatiquement. Un push vers le d√©p√¥t git d√©clenchera un travail de construction qui, s'il r√©ussit, se connectera en tant que vous-m√™me √† Pulumi et lancera une mise √† jour avec le nouveau code.

Ainsi, si, par exemple, vous validez une modification qui ajoute un bucket GCS au code, dans quelques minutes, ce bucket GCS sera cr√©√© et le fichier README.md sera mis √† jour avec les param√®tres du constructeur :

![cb-trigger-list](02-pulumi-commands.webp)
En gras, vous pouvez voir 3 param√®tres mis √† jour par Cloud Build lui-m√™me !

Mon code prend en charge **Github** (tel quel) et **Bitbucket** (code √† 99% l√† car il fonctionnait en premier !) pour le moment.

J'ai √©galement personnalis√© le message selon l'article de Laura, en ajoutant un "[construit avec Cloud Build]" au message git ("slash N fix", dans ce cas) :

![Voir sur le site Web de Pulumi](03-trigger-build-on-pulumi-site.webp)

## Que signifie Pulumi ?

J'ai essay√© Google Translate, il semble que cela puisse signifier balai (üßπ) en hawa√Øen ou en birman (üá≤üá≤, maintenant Myanmar). D'ici l√†, j'utiliserai le premier emoji, jusqu'√† ce que quelqu'un me prouve le contraire.

Edit : mon ami Aaron de Pulumi confirme le balai et pointe vers [cet article](http://joeduffyblog.com/2018/06/18/hello-pulumi/).

##  Prochaines √©tapes
Mon üìù pour l'avenir comprend :

* Avoir un r√©glage correct du mot de passe/√©tat sur GCP via HSM ou GCS.
* Transformer en un module afin que, quel que soit le projet Pulumi que vous pourriez avoir, vous puissiez simplement appeler ce code avec 4 √† 5 variables (utilisateur github, d√©p√¥t github, r√©pertoire de construction Pulumi, informations d'identification, ..). Je dois encore voir si cela est viable √©galement entre les langages (nonüêç).

## R√©f√©rences

Code original (Cloud Build + Node.js) : https://www.pulumi.com/docs/guides/continuous-delivery/google-cloud-build/

Mon code (python) : https://github.com/palladius/pulumi/tree/main/examples/python-gcp-cloudbuild-auto-trigger


*(Generated by Geminocks: https://github.com/palladius/ricc.rocks/tree/main/gemini prompt_version=1.4)*